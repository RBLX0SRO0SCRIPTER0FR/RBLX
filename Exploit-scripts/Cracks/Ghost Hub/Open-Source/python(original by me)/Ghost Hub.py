import re
import requests
import os
url = 'https://anti-httpspy.scriptsobfuscator.workers.dev/Ghost%20Hub'
headers = {
    'User-Agent': 'Roblox/WinInet'
}
ascii = requests.get(url, headers=headers)
ascii = re.search(r'\("([^"]+)"\)', ascii.text)
ascii = ascii.group(1)
ascii_codes = ascii.split('\\')
decoded = []
for adecode in ascii_codes:
    try:
        bdecode = int(adecode)
        decoded.append(chr(bdecode))
    except ValueError:
        pass
loader = "".join(decoded)
key = re.search(r'\[12\]="([^"]*)"', loader)
key = key.group(1)
print(f"I found the key guys here it is{key}")
GhostHubUrl = re.search(r'HttpGet\("([^"]+)"\)', loader)
GhostHubUrl = GhostHubUrl.group(1)
print(f"Yo so like this is the url {GhostHubUrl}")
GhostHub = requests.get(GhostHubUrl, headers=headers)
GhostHub = (GhostHub.text)
def extract_ascii(text):
    start = text.find('end)("')
    start += len('end)("')
    end = text.find('"', start)
    source = text[start:end]
    return source
source = extract_ascii(GhostHub)

def decrypt_source(source, key):
    decrypted = []
    parts = source.split('/')
    for i, part in enumerate(parts):
        try:
            byte = int(part)
            k = ord(key[i % len(key)])
            decoded = (byte - k + 256) % 256
            decrypted.append(chr(decoded))
        except ValueError:
            continue
    return ''.join(decrypted)
GhostHub = decrypt_source(source,key)
print("\nGhost Hub CRACKED LOL:\n")
print('\n'.join(GhostHub.splitlines()[:10]))
with open('Ghost Hub.lua', 'w') as f:
    f.write(GhostHub)
file = "Ghost Hub.lua"
name, ext = os.path.splitext(file)
counter = 0
new_file = file
while os.path.exists(new_file):
    counter += 1
    new_file = f"{name}({counter}){ext}"
with open(new_file, "w", encoding="utf-8") as f:
    f.write(GhostHub)
